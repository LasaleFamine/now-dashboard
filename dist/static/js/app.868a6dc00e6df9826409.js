webpackJsonp([1,0],[function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}var i=n(21),o=r(i),s=n(12),a=r(s);new o.default({el:"#app",render:function(e){return e(a.default)}})},function(e,t,n){var r,i;n(7),r=n(6);var o=n(16);i=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(i=r=r.default),"function"==typeof i&&(i=i.options),i.render=o.render,i.staticRenderFns=o.staticRenderFns,i._scopeId="data-v-0575a22f",e.exports=r},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(15),o=r(i),s=n(13),a=r(s),l=n(14),c=r(l),u=n(1),d=r(u);t.default={name:"app",data:function(){return{API_ENDPOINT:"/api/v1/deployments",token:"",deployments:[],showSpinner:!1,showAlert:!1,typeAlert:"",msgAlert:""}},methods:{fetchFiles:function(e){var t=this,n=this.deployments[e].uid;this.toggleDeploySpinner(e),fetch(this.API_ENDPOINT+"/"+n+"/files?token="+this.token,{headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(n){if(n.error)throw n;t.setFiles(e,n),t.toggleDetail(e),t.toggleDeploySpinner(e)}).catch(function(n){t.setAlert(!0,"error",n.error||n.message),t.toggleDeploySpinner(e)})},fetchDeployments:function(){var e=this;this.showSpinner=!0,fetch(this.API_ENDPOINT+"?token="+this.token,{headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(t){if(t.error)throw t;e.setDeployments(t.deployments),e.showSpinner=!1}).catch(function(t){e.setAlert(!0,"error",t.error||t.message),e.showSpinner=!1})},deleteDeploy:function(e){var t=this,n=this.deployments[e].uid;this.toggleDeploySpinner(e),fetch(this.API_ENDPOINT+"/"+n+"?token="+this.token,{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(function(e){return e.json()}).then(function(n){if(n.error)throw n;t.removeDeploy(e),t.setAlert(!0,"success","Deploy deleted!")}).catch(function(n){t.setAlert(!0,"error",n.error||n.message),t.toggleDeploySpinner(e)})},setDeployments:function(e){var t=this,n=e.map(function(e){var n=e;return n.showDetail=!1,n.showSpinner=!1,n.files=[],n.created=t.parseDate(n.created),n.url="https://".concat(n.url),n});this.deployments=n},setFiles:function(e,t){var n=this.deployments.map(function(n,r){var i=n;return e===r&&(i.files=t),i});this.deployments=n},removeDeploy:function(e){var t=this.deployments.filter(function(t,n){return n!==e});this.deployments=t},toggleDetail:function(e){this.deployments[e].showDetail=!this.deployments[e].showDetail},toggleDeploySpinner:function(e){this.deployments[e].showSpinner=!this.deployments[e].showSpinner},_onSendToken:function(e){return 13!==e.keyCode||(this.setAlert(!1),this.fetchDeployments(),!0)},_onConfirmDelete:function(e){this.deleteDeploy(e)},_onHideAlert:function(){this.setAlert(!1)},_onToggleDetail:function(e,t){return t?(this.toggleDetail(e),!1):(this.fetchFiles(e),!0)},parseDate:function(e){var t=["January","February","March","April","May","June","July","August","September","October","November","December"],n=new Date(parseInt(e,10)),r=t[n.getMonth()]+"/"+n.getDate()+"/"+n.getFullYear()+" "+n.getHours()+":"+n.getMinutes();return r},setAlert:function(e,t,n){this.showAlert=e,this.typeAlert=t||null,this.msgAlert=n||null}},components:{NavBar:o.default,Alert:a.default,Grid:c.default,Spinner:d.default}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"alert",props:["msg","type","visible"],data:function(){return{}},computed:{alertClass:function(){var e="alert alert-error";return"success"===this.type?e="alert alert-success":"info"===this.type&&(e="alert alert-info"),e},alertWrapperClass:function(){var e=this.visible?"":"hide";return e}},methods:{_onClickAlert:function(){this.$emit("hide-alert")}}}},function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=r(i);t.default={name:"grid",props:["items"],data:function(){return{currentSelectedIndex:""}},methods:{computeUrlText:function(e){return e.replace("https://","").replace(".now.sh","")},showConfirmButton:function(e){this.$el.querySelector("#deploy"+e+" .delete-icon").classList.add("hide"),this.$el.querySelector("#deploy"+e+" .confirm-button").classList.remove("hide")},hideEveryConfirmButton:function(){if(""===this.currentSelectedIndex)return!1;var e=this.currentSelectedIndex;return this.$el.querySelector("#deploy"+e+" .confirm-button").classList.add("hide"),this.$el.querySelector("#deploy"+e+" .delete-icon").classList.remove("hide"),!0},_onClickToggleShowId:function(e,t){var n=t?".show-id":".item-id",r=t?".item-id":".show-id";return this.$el.querySelector("#deploy"+e+" "+n).classList.add("hide"),this.$el.querySelector("#deploy"+e+" "+r).classList.remove("hide"),!0},_onClickDelete:function(e){this.hideEveryConfirmButton(),this.currentSelectedIndex=e,this.showConfirmButton(e)},_onClickConfirmDelete:function(){var e=this.currentSelectedIndex;this.$emit("confirm-delete",e),this.hideEveryConfirmButton(),this.currentSelectedIndex=""},_onClickToggleDetail:function(e,t,n){return"A"!==e.tagName&&"I"!==e.tagName&&(this.$emit("toggle-detail",t,n),!0)}},components:{Spinner:o.default}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"nav-bar",data:function(){return{msg:"Welcome to your Now dashboard"}}}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"spinner",props:["visible"],data:function(){return{}},computed:{spinnerWrapperClass:function(){var e=this.visible?"":"hide";return e}}}},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){var r,i;n(10),r=n(2);var o=n(19);i=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(i=r=r.default),"function"==typeof i&&(i=i.options),i.render=o.render,i.staticRenderFns=o.staticRenderFns,e.exports=r},function(e,t,n){var r,i;n(8),r=n(3);var o=n(17);i=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(i=r=r.default),"function"==typeof i&&(i=i.options),i.render=o.render,i.staticRenderFns=o.staticRenderFns,i._scopeId="data-v-09d58772",e.exports=r},function(e,t,n){var r,i;n(11),r=n(4);var o=n(20);i=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(i=r=r.default),"function"==typeof i&&(i=i.options),i.render=o.render,i.staticRenderFns=o.staticRenderFns,i._scopeId="data-v-ecbaacc0",e.exports=r},function(e,t,n){var r,i;n(9),r=n(5);var o=n(18);i=r=r||{},"object"!=typeof r.default&&"function"!=typeof r.default||(i=r=r.default),"function"==typeof i&&(i=i.options),i.render=o.render,i.staticRenderFns=o.staticRenderFns,i._scopeId="data-v-179fb4ca",e.exports=r},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.spinnerWrapperClass+" grid -center"},[n("div",{staticClass:"loading"})])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.alertWrapperClass,on:{click:e._onClickAlert}},[n("div",{class:e.alertClass},[e._v(e._s(e.msg))])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("header",[n("nav",{staticClass:"grid -between"},[n("div",{staticClass:"nav-center"},[e._v("\n      "+e._s(e.msg)+"\n    ")])])])},staticRenderFns:[]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("nav-bar"),e._v(" "),n("div",{staticClass:"container"},[n("alert",{attrs:{visible:e.showAlert,type:e.typeAlert,msg:e.msgAlert},on:{"hide-alert":e._onHideAlert}}),e._v(" "),n("div",{staticClass:"form-group"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.token,expression:"token"}],staticClass:"form-control",attrs:{placeholder:"Your token",type:"password"},domProps:{value:e._s(e.token)},on:{keypress:e._onSendToken,input:function(t){t.target.composing||(e.token=t.target.value)}}})]),e._v(" "),n("spinner",{attrs:{visible:e.showSpinner}}),e._v(" "),n("grid",{attrs:{items:e.deployments},on:{"confirm-delete":e._onConfirmDelete,"toggle-detail":e._onToggleDetail}}),e._v(" "),e._m(0)],1)],1)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("footer",{staticClass:"footer"},[n("div",{staticClass:"grid -center"},[n("div",[n("a",{attrs:{href:"https://github.com/lasalefamine/now-dashboard",target:"_blank"}},[n("i",{staticClass:"fa fa-github"})])])])])}]}},function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{},e._l(e.items,function(t,r){return n("div",{staticClass:"items-table"},[n("div",{staticClass:"grid -between single-item",attrs:{id:"deploy"+r},on:{click:function(n){e._onClickToggleDetail(n.target,r,t.showDetail)}}},[n("div",{staticClass:"show-id"},[n("a",{on:{click:function(t){e._onClickToggleShowId(r,!0)}}},[e._v("Show ID")])]),e._v(" "),n("div",{staticClass:"item-id hide"},[n("a",{on:{click:function(t){e._onClickToggleShowId(r,!1)}}},[e._v(e._s(t.uid))])]),e._v(" "),n("div",[e._v(e._s(t.name))]),e._v(" "),n("div",[n("a",{attrs:{title:t.url,href:t.url,target:"_blank"}},[e._v("\n          "+e._s(e.computeUrlText(t.url))+"\n          "),n("i",{staticClass:"fa fa-external-link"})])]),e._v(" "),n("div",[e._v(e._s(t.created))]),e._v(" "),n("div",{staticClass:"delete-icon"},[n("a",{on:{click:function(t){e._onClickDelete(r)}}},[n("i",{staticClass:"fa fa-trash"})])]),e._v(" "),n("div",{staticClass:"confirm-button hide",on:{click:e._onClickConfirmDelete}},[n("a",[e._v("Confirm?")])]),e._v(" "),n("spinner",{attrs:{visible:t.showSpinner}})],1),e._v(" "),n("transition",{attrs:{name:"fade"}},[t.showDetail?n("div",{staticClass:"grid"},e._l(t.files,function(t){return n("div",{staticClass:"cell -11of12"},[e._v("\n          "+e._s(t.name)+"\n        ")])})):e._e()])],1)}))},staticRenderFns:[]}}]);
//# sourceMappingURL=app.868a6dc00e6df9826409.js.map